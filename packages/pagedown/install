#!/bin/bash

set -x
set -e

# the functional test has failed without Pandoc
# pagedown requires Pandoc >= 2.2.3
wget https://github.com/jgm/pandoc/releases/download/2.2.3.1/pandoc-2.2.3.1-1-amd64.deb
dpkg -i pandoc-2.2.3.1-1-amd64.deb
rm pandoc-2.2.3.1-1-amd64.deb

apt-get update -qq

# install libssl-dev for the websocket package. No need for xenial.
if [ $(lsb_release -cs) == "bionic" ] ; then
  apt-get install -y libssl-dev
fi

# install chromium to use pagedown::chrome_print()
apt-get install -y chromium-browser
